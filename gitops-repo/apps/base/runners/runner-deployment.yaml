apiVersion: actions.github.com/v1beta1
kind: RunnerDeployment
metadata:
  name: repo-runner
  namespace: actions-runner-system
spec:
  replicas: 0
  template:
    spec:
      repository: ${runnerRepository}
      image: ${container-registry}.azurecr.io/actions-runner:${image-version}
      imagePullPolicy: Always
      nodeSelector:
        agentpool: runners
      tolerations:
        - key: workload
          operator: Equal
          value: ci-cd
          effect: NoSchedule
      resources:
        requests:
          cpu: 500m
          memory: 1Gi
        limits:
          cpu: 2
          memory: 4Gi
      securityContext:
        runAsNonRoot: true
        seccompProfile:
          type: RuntimeDefault
      env: []